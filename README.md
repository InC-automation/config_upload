# Описание

Это демонстрационный пример реализации функции загрузки конфигурации КС (user_config.xml) без применения Конфигуратора. 

Данный пример может быть использован в том числе для загрузки больших (> 1 Мб) конфигураций.

Данный пример предназначен для использования на стендах и учебных полигонах с целью изучения возможностей расширения Эликонт-КС. Автор не несет ответственности за негативные последствия, вызванные использованием данного примера.

Пример разработан на языке Python.

Для начала работы нужно установить Эликонт-КС. Скачать дистрибутив для нужной ОС можно по ссылке: https://ptk-sura.ru/products/kommunikatsionnyy-server/elicont-cs/

Там же есть инструкции по установке и настройке.

>Для использования примера необходима версия Эликонт-КС не ниже 2.8.

# Процедура установки и настройки
1. На странице https://www.python.org/downloads/windows/ скачать инсталлятор Python и установить его.
>На момент разработки примера актуальной является версия python-3.13.7.exe

2. Установить библиотеку для работы с gRPC

Выполнить в командной строке: 
`pip install grpcio grpcio-tools`

Если Интернет доступен через прокси, то надо использовать команду:

`pip install grpcio grpcio-tools --proxy //[user:passwd@]proxy.server:port`

3. Создать в каталог для приложения. Поместить туда файлы:

* api_gateway.proto - файл с описанием интерфейсов gRCP (системный канал);
* config_upload.py - файл, в котором реализован класс для работы с конфигурацией Эликонт-КС (на языке Python);
* settings.ini - файл с настройками приложения

4. Создать файлы для работы с gRPC (на языке Python).
> Этот шаг можно пропустить, т.к. файлы для Python уже приложены к примеру.

В каталоге с приложением выполнить в командной строке:

`>python -m grpc_tools.protoc --python_out=%CD% --grpc_python_out=%CD% --proto_path=%CD% *.proto`

Должны появиться файлы:

* api_gateway.py
* api_gateway_grpc.py

5. В файле settings.ini поменять настройки, если необходимо:

Параметр | Назначение
--------------------------------|--------------------------------
APIGATEWAY = localhost:8080 | подключение к КС (системный канал)
FILE_PATH = D:\temp\user_config.xml | путь к файлу конфигурации

6. Запустить скрипт.

Выполнить в командной строке:

`python config_upload.py`

7. Проконтролировать работу Эликонт-КС в Web.
>См. руководство пользователя Эликонт-КС.


## Исполняемый файл
Если на целевой машине отсутствует интерпретатор Python, и его установка нежелательна, то нужно подготовить исполняемый файл программы.

1. Установить библиотеку для компиляции:
Выполнить в командной строке:
>pip install pyinstaller
2. Перейти в каталог со скриптом и выполнить команду:
>pyinstaller --onefile config_upload.py

В результате компиляции получится файл /dist/config_upload.exe

3. В каталог с исполняемым файлом нужно скопировать файл с настройками (settings.ini).
4. Можно запускать файл на выполнение.